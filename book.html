<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BookMap — 북맵 리스트</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .filter-btn {
      @apply px-4 py-2 border rounded-lg cursor-pointer transition;
    }
    .filter-btn.active {
      @apply bg-blue-600 text-white border-blue-600;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <!-- 상단 네비게이션 -->
  <header class="bg-blue-600 text-white shadow">
    <div class="max-w-5xl mx-auto px-6 py-4 flex justify-between items-center">
      <h1 class="text-xl font-bold">📚 BookMap</h1>
      <nav class="text-sm">
        <a href="index.html" class="hover:underline">홈</a> ·
        <span class="font-semibold">북맵 리스트</span>
      </nav>
    </div>
  </header>

  <!-- 메인 컨텐츠 -->
  <main class="max-w-6xl mx-auto px-6 py-10">
    <h2 class="text-2xl font-bold mb-6">북맵 리스트</h2>

    <!-- 필터 영역 -->
    <div class="mb-8 bg-white p-6 rounded-2xl shadow">
      <h3 class="text-lg font-semibold mb-4">카테고리</h3>
      <div id="categoryButtons" class="flex flex-wrap gap-2 mb-6">
        <!-- JSON에서 자동 생성 -->
      </div>

      <h3 class="text-lg font-semibold mb-4">단계</h3>
      <div id="levelButtons" class="flex flex-wrap gap-2">
        <button class="filter-btn" data-level="입문">입문</button>
        <button class="filter-btn" data-level="초급">초급</button>
        <button class="filter-btn" data-level="중급">중급</button>
        <button class="filter-btn" data-level="고급">고급</button>
        <button class="filter-btn" data-level="전문">전문</button>
      </div>
    </div>

    <!-- 도서 리스트 -->
    <div id="bookList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- 카드들이 JS로 채워집니다 -->
    </div>
  </main>

  <script>
    const API_URL = "https://raw.githubusercontent.com/bookmapdb/bookmap-db/main/books.json";
    const bookList = document.getElementById("bookList");
    const categoryButtons = document.getElementById("categoryButtons");
    const levelButtons = document.getElementById("levelButtons");

    let selectedCategories = [];
    let selectedLevels = [];

    // 도서 데이터 불러오기
    async function fetchBooks() {
      const res = await fetch(API_URL);
      return res.json();
    }

    // 카테고리 버튼 생성
    function createCategoryButtons(books) {
      const categories = new Set();
      books.forEach(book => {
        if (book.category) {
          book.category.split(",").forEach(c => categories.add(c.trim()));
        }
      });

      categoryButtons.innerHTML = "";
      categories.forEach(cat => {
        const btn = document.createElement("button");
        btn.className = "filter-btn";
        btn.textContent = cat;
        btn.dataset.category = cat;
        btn.addEventListener("click", () => {
          btn.classList.toggle("active");
          if (selectedCategories
