<div id="book-list" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"></div>

<script>
async function loadBooks() {
  const res = await fetch("https://script.google.com/macros/s/AKfycbywJOW4dOlmDrzood3ka_jizri4K7sFqTJDPG8ibnmDrxXZgFWrFnjMEv38C5pCtjp_/exec");
  const books = await res.json();
  
  const container = document.getElementById("book-list");
  container.innerHTML = "";

  books.forEach(book => {
    const card = document.createElement("div");
    card.className = "bg-white rounded-2xl shadow p-4 hover:shadow-lg transition cursor-pointer";

    card.innerHTML = `
      <img src="${book.image}" alt="${book.title}" class="w-full h-48 object-cover rounded-xl mb-4">
      <h3 class="text-lg font-semibold mb-1">${book.title}</h3>
      <p class="text-sm text-gray-600 mb-1">저자: ${book.author}</p>
      <p class="text-sm text-gray-600 mb-1">${book.publisher}</p>
      <p class="text-sm text-gray-700 mb-3 line-clamp-3">${book.description || ""}</p> <!-- ✅ 설명 추가 -->
      <div class="flex flex-wrap gap-2 text-xs">
        <span class="px-2 py-1 bg-yellow-100 text-yellow-700 rounded">${book.category}</span>
        <span class="px-2 py-1 bg-blue-100 text-blue-700 rounded">${book.level}</span>
        <span class="px-2 py-1 bg-green-100 text-green-700 rounded">${book.division}</span>
      </div>
    `;

    // 카드 클릭 → 상세 페이지 이동
    card.onclick = () => {
      window.location.href = `book-detail.html?id=${book.id}`;
    };

    container.appendChild(card);
  });
}

loadBooks();
</script>
