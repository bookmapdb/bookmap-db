<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BookMap β€” λ„μ„ κ΄€κ³„λ„</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- μƒλ‹¨ λ„¤λΉ„κ²μ΄μ… -->
  <header class="bg-blue-600 text-white shadow">
    <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
      <h1 class="text-xl font-bold">π“ BookMap</h1>
      <nav class="flex gap-6 text-sm">
        <a href="index.html" class="hover:underline">ν™</a>
        <a href="form.html" class="hover:underline">λ„μ„ λ“±λ΅</a>
        <a href="book.html" class="hover:underline">λ¶λ§µ λ¦¬μ¤νΈ</a>
        <a href="map.html" class="hover:underline font-bold">λ¶λ§µ λ³΄κΈ°</a>
      </nav>
    </div>
  </header>

  <!-- λ©”μΈ -->
  <main class="max-w-6xl mx-auto px-6 py-10">
    <h2 class="text-2xl font-bold mb-6">π“– λ„μ„ κ΄€κ³„λ„</h2>
    <p class="mb-6 text-gray-700">
      λ¶λ§µ κ΄€κ³„λ„λ” λ„μ„, μ €μ, μ£Όμ , λ‹¨κ³„ λ“±κ³Ό κ°™μ€ κ΄€κ³„μ— λ”°λΌ μ—°κ²°λλ” κ²ƒμ„ λ³΄μ—¬μ¤λ‹λ‹¤.<br>
      λ„μ„λ…μ΄λ‚ μ €μ μ΄λ¦„μ— λ§μ°μ¤λ¥Ό μ¬λ¦¬λ©΄ κ°„λ‹¨ν• μ„¤λ…μ„ λ³Ό μ μμΌλ©°, ν΄λ¦­ν•λ©΄ ν•΄λ‹Ή λ„μ„ μƒμ„Ένμ΄μ§€λ΅ μ΄λ™ν•©λ‹λ‹¤.
    </p>

    <!-- ν•„ν„° -->
    <section class="bg-white p-6 rounded-xl shadow mb-6 space-y-4">
      <div>
        <h3 class="font-semibold mb-2">μΉ΄ν…κ³ λ¦¬</h3>
        <div id="category-filters" class="flex flex-wrap gap-2"></div>
      </div>
      <div>
        <h3 class="font-semibold mb-2">λ‹¨κ³„</h3>
        <div id="level-filters" class="flex flex-wrap gap-2"></div>
      </div>
      <div>
        <h3 class="font-semibold mb-2">λ„μ„κµ¬λ¶„</h3>
        <div id="division-filters" class="flex flex-wrap gap-2"></div>
      </div>
      <div>
        <h3 class="font-semibold mb-2">μ €μ</h3>
        <div id="author-filters" class="flex flex-wrap gap-2"></div>
      </div>
      <div>
        <h3 class="font-semibold mb-2">μ£Όμ </h3>
        <div id="subject-filters" class="flex flex-wrap gap-2"></div>
      </div>
    </section>

    <!-- λ…Έλ“ μƒ‰μƒ μ•λ‚΄ -->
    <section class="bg-white p-4 rounded-xl shadow mb-6">
      <div class="flex flex-wrap gap-6 items-center">
        <div class="flex items-center gap-2"><span class="w-4 h-4 rounded-full bg-black"></span> ν° μ£Όμ </div>
        <div class="flex items-center gap-2"><span class="w-4 h-4 rounded-full bg-brown-600"></span> μ„Έλ¶€ μ£Όμ </div>
        <div class="flex items-center gap-2"><span class="w-4 h-4 rounded-full bg-blue-500"></span> μ €μ</div>
        <div class="flex items-center gap-2"><span class="w-4 h-4 rounded-full bg-orange-500"></span> μΉ΄ν…κ³ λ¦¬</div>
        <div class="flex items-center gap-2"><span class="w-4 h-4 rounded-full bg-green-500"></span> λ„μ„κµ¬λ¶„</div>
        <div class="flex items-center gap-2"><span class="w-4 h-4 rounded-full bg-gray-400"></span> λ„μ„</div>
      </div>
    </section>

    <!-- κ·Έλν”„ -->
    <section class="bg-white p-6 rounded-xl shadow">
      <svg id="graph" width="100%" height="600"></svg>
    </section>
  </main>

  <script>
    const colors = {
      theme: "#111827",      // ν° μ£Όμ  (κ²€μ€μƒ‰)
      subject: "#92400e",    // μ„Έλ¶€ μ£Όμ  (λΈλΌμ΄)
      author: "#2563eb",     // μ €μ (νλ€μƒ‰)
      category: "#f59e0b",   // μΉ΄ν…κ³ λ¦¬ (μ£Όν™©μƒ‰)
      division: "#10b981",   // λ„μ„κµ¬λ¶„ (μ΄λ΅μƒ‰)
      book: "#9ca3af"        // λ„μ„ (νμƒ‰)
    };

    // μƒν” λ°μ΄ν„° (μ‹¤μ λ” fetchλ΅ λ¶λ¬μ¤κΈ°)
    const nodes = [
      { id: "λ¬Έν•™", type: "theme" },
      { id: "μ² ν•™", type: "theme" },
      { id: "μ‚¬ν", type: "category" },
      { id: "κΉ€μν•", type: "author" },
      { id: "μ‘λ³„μΈμ‚¬", type: "book" },
      { id: "μ…λ¬Έ", type: "division" }
    ];

    const links = [
      { source: "κΉ€μν•", target: "μ‘λ³„μΈμ‚¬" },
      { source: "λ¬Έν•™", target: "μ‘λ³„μΈμ‚¬" },
      { source: "μ² ν•™", target: "μ‚¬ν" }
    ];

    const svg = d3.select("#graph");
    const width = +svg.node().getBoundingClientRect().width;
    const height = +svg.attr("height");

    const g = svg.append("g");

    const zoom = d3.zoom().on("zoom", (event) => {
      g.attr("transform", event.transform);
    });
    svg.call(zoom);

    const simulation = d3.forceSimulation(nodes)
      .force("link", d3.forceLink(links).id(d => d.id).distance(150))
      .force("charge", d3.forceManyBody().strength(-400))
      .force("center", d3.forceCenter(width / 2, height / 2));

    const link = g.append("g")
      .attr("stroke", "#ccc")
      .selectAll("line")
      .data(links)
      .join("line");

    const node = g.append("g")
      .selectAll("circle")
      .data(nodes)
      .join("circle")
      .attr("r", 18)
      .attr("fill", d => colors[d.type] || "#999")
      .call(d3.drag()
        .on("start", dragstarted)
        .on("drag", dragged)
        .on("end", dragended));

    const label = g.append("g")
      .selectAll("text")
      .data(nodes)
      .join("text")
      .text(d => d.id)
      .attr("font-size", 12)
      .attr("fill", "#111")   // κ²€μ • ν…μ¤νΈ
      .attr("dy", 4)
      .attr("text-anchor", "middle");

    simulation.on("tick", () => {
      link
        .attr("x1", d => d.source.x)
        .attr("y1", d => d.source.y)
        .attr("x2", d => d.target.x)
        .attr("y2", d => d.target.y);

      node
        .attr("cx", d => d.x)
        .attr("cy", d => d.y);

      label
        .attr("x", d => d.x)
        .attr("y", d => d.y);
    });

    function dragstarted(event, d) {
      if (!event.active) simulation.alphaTarget(0.3).restart();
      d.fx = d.x;
      d.fy = d.y;
    }
    function dragged(event, d) {
      d.fx = event.x;
      d.fy = event.y;
    }
    function dragended(event, d) {
      if (!event.active) simulation.alphaTarget(0);
      d.fx = null;
      d.fy = null;
    }
  </script>
</body>
</html>
